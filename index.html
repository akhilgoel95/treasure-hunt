<script> 

var unique;
var counter =0;
var rows=0,columns=0;
var html='';
var htmlNew='';
function firstGrid()
{
debugger;
document.getElementById("main_grid").innerHTML="";
document.getElementById("final_grid").innerHTML="";
html='';
htmlNew='';
rows = document.getElementById("rows").value;
columns = document.getElementById("columns").value;

for (var i = 1; i <=rows; i++) { 
	for (var j = 1; j <=columns; j++) 

	{ 
		unique=i+'_'+j;
		uniqueNew = i+'__'+j;
		html += '<div class= "mystyle" id="'+i+'_'+j+'" Onclick="put_treasure(\''+unique+'\')"></div>';
		htmlNew += '<div class= "mystyle" id="'+i+'__'+j+'"></div>';
	} 
	html += "<br>"
	htmlNew += "<br>"
}
 document.getElementById("main_grid").innerHTML = html;
 document.getElementById("final_grid").innerHTML = htmlNew;
 document.getElementById("btnResultGrid").style.display="block";
  document.getElementById("btnReset").style.display="block";
} 
function put_treasure(unique_id) {
	if(document.getElementById(unique_id).innerHTML == 'x')
	{
		document.getElementById(unique_id).innerHTML = '';
	
	}
	else
	{
		document.getElementById(unique_id).innerHTML = 'x';
		//unique_id.split('_')[0];
	}
}
  
  function fillDigits()
  {
  for (i=1;i<=rows;i++)
	{
		for(j=1;j<=columns;j++)
		{
			if(document.getElementById(i+'_'+j).innerHTML == 'x')
				{
					document.getElementById(i+'__'+j).innerHTML = 'x';
					continue	;
				}
			
			//else if(i-1>=0 && i+1<=2 &&j-1>=0 && j+1<=2)
		 if((i-1)>=1)
			{
				if((j-1)>=1)
				{
					if(document.getElementById((i-1)+'_'+(j-1)).innerHTML == 'x')
					{
						counter++;
					}
				}
				if(document.getElementById((i-1)+'_'+j).innerHTML == 'x')
				{
					counter++;
				}
				if((j+1)<=columns)
				{
					if(document.getElementById((i-1)+'_'+(j+1)).innerHTML == 'x')
					{
						counter++;
					}
				}
			
			}
			if((i+1)<=rows)
			{
				if((j-1)>=1)
				{
					if(document.getElementById((i+1)+'_'+(j-1)).innerHTML == 'x')
					{
						counter++;
					}
				}
					
				if(document.getElementById((i+1)+'_'+j).innerHTML == 'x')
				{
					counter++;
				}
					
				if ((j+1)<=columns)
				{				
				if(document.getElementById((i+1)+'_'+(j+1)).innerHTML == 'x')
					{
						counter++;
					}
				}
			}
			if((j-1)>=1)
			{
				if(document.getElementById(i+'_'+(j-1)).innerHTML == 'x')
				{
					counter++;
				}
			}
			if((j+1)<=columns)
			{
				if(document.getElementById(i+'_'+(j+1)).innerHTML == 'x')
				{
					counter++;
				}
			}
				
			
			document.getElementById(i+'__'+j).innerHTML= counter;
				counter=0;
		}
	}
	
	document.getElementById("final_grid").style.display="block";

	
	
	
  }



function reset()
{
	document.getElementById("main_grid").innerHTML="";
	document.getElementById("final_grid").innerHTML="";
	document.getElementById("btnResultGrid").style.display="none";
	document.getElementById("btnReset").style.display="none";
	document.getElementById("rows").value="";
	document.getElementById("columns").value="";
	document.getElementById("rows").focus();
	html='';
	htmlNew='';
}

</script>				 
<style>
.mystyle
{
border:1px solid black;
padding:12px;
display:inline-block;
height:5px;
width:5px;
float:center;
}
.mystyle:after
{
    content: '.';
    visibility: hidden;
}
#btnResultGrid,#btnReset
{
display:inline-block;
}
#outer
{
    width:100%;
    text-align: left;
}
.inner
{
display:inline-block;
}

</style>
Enter the number of rows in grid  : <input id = "rows" type = "number">
<br/><br/>
Enter the number of columns in grid: <input id = "columns" type = "number">
<br/><br/>
<input type="button" onClick="firstGrid();"   value="Create Grid">
<br/><br/>
<div id="main_grid"></div>
<br/>
<input type="button" id="btnResultGrid" onClick="fillDigits();" style="display:none" value="submit">
<br/>
<div id="final_grid" style="display:none"></div>
<br/><br/>

<input type="button" id="btnReset" onClick="reset();" style="display:none" value="Reset">
<div>


